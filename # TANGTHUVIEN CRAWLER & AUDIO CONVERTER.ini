# TANGTHUVIEN CRAWLER & AUDIO CONVERTER

Mô tả:
- Tải text từng chương từ tangthuvien.net
- Lưu file text vào "./{story_id} - Text/Chapter_{index}.txt"
- Gọi tool CLI `ttx` để convert sang audio -> "./{story_id} - Audio/Chapter_{index}.mp3"

Yêu cầu:
- Python 3.8+
- pip packages: requests, beautifulsoup4
- CLI ttx phải cài và trong PATH (xem phần cài đặt ttx)

Cài đặt (macOS):
1. Tạo virtualenv (khuyến nghị):
   python3 -m venv venv
   source venv/bin/activate

2. Cài dependencies:
   pip install -r requirements.txt

3. Đảm bảo `ttx` CLI có thể chạy:
   - Nếu ttx là một công cụ bạn đã có, đảm bảo nó nằm trong PATH.
   - Nếu bạn cài ttx bằng pip (tùy vào tool): pip install <ttx-package> hoặc theo hướng dẫn của ttx.

Chạy:
   python3 run.py --config config.json

Lưu ý:
- Kiểm tra file config.json mẫu trước khi chạy.
- Nếu gặp lỗi trong chương nào, tool sẽ dừng và ghi lại last_downloaded_chapter đã thành công trước đó để tránh lỗi dây chuyền.

tangthuvien-crawler/
├── README.md                 # hướng dẫn + cách dùng
├── requirements.txt          # pip dependencies
├── config.json               # cấu hình (mẫu)
├── run.py                    # entrypoint (CLI)
├── crawler/
│   ├── __init__.py
│   ├── config_manager.py     # đọc/ghi config.json
│   ├── fetcher.py            # gọi API danh sách chương + tải nội dung chương
│   ├── parser.py             # parse HTML -> plain text
│   ├── converter.py          # gọi subprocess ttx -> audio
│   └── utils.py              # helper (paths, logging)
├── ./{story_id} - Text/      # runtime: chứa file text per chapter (tạo tự động)
└── ./{story_id} - Audio/     # runtime: chứa file audio per chapter (tạo tự động)


python3 run.py --config config.json --improve-text --use-llm --verbose    
python3 gen_youtube_descriptions.py --config config.json --group-size 5 --playlist "https://www.youtube.com/playlist?list=PLxYgiuUshyZd5zVZODT8dhhX1kSG3AvJ_"